# üì¶ Subscription Service

REST API —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–∞—Å—á—ë—Ç–∞ –∏—Ö —Å—É–º–º–∞—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.

---

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Clean Architecture (—Å–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)**.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–ª–æ—ë–≤:

cmd/app ‚Üí —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞  
internal/domain ‚Üí –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∞–≤–∏–ª–∞  
internal/dto ‚Üí –≤—Ö–æ–¥–Ω—ã–µ DTO  
internal/handler ‚Üí HTTP —Å–ª–æ–π  
internal/service ‚Üí –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞  
internal/repository ‚Üí –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤  
internal/repository/postgres ‚Üí —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ë–î  
migrations ‚Üí SQL –º–∏–≥—Ä–∞—Ü–∏–∏


### –ü—Ä–∏–Ω—Ü–∏–ø—ã:

- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤–Ω—É—Ç—Ä—å (Dependency Inversion)
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- Repository Pattern
- DTO –æ—Ç–¥–µ–ª–µ–Ω—ã –æ—Ç –¥–æ–º–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ ID
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
    - –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    - –ø–æ —Å–µ—Ä–≤–∏—Å—É
- ‚úÖ –ü–æ–¥—Å—á—ë—Ç —Å—É–º–º–∞—Ä–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–æ–∫ –∑–∞ –ø–µ—Ä–∏–æ–¥ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏:
    - –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    - –ø–æ —Å–µ—Ä–≤–∏—Å—É

---

## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Go 1.24
- PostgreSQL 16
- pgx/v5
- chi router
- Docker + docker-compose
- golang-migrate

---

## üìÖ –§–æ—Ä–º–∞—Ç –¥–∞—Ç

–í API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç:

MM-YYYY


–ü—Ä–∏–º–µ—Ä:

01-2025  
12-2024  
02-2026


---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### 1Ô∏è‚É£ –°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone <repo_url>
cd <project>
```

### 2Ô∏è‚É£ –°–æ–∑–¥–∞—Ç—å .env
```bash
cp .env.example .env
```

–ü—Ä–∏–º–µ—Ä .env.example:  
APP_PORT=8081

DB_HOST=db  
DB_PORT=5432  
DB_USER=postgres  
DB_PASSWORD=secret  
DB_NAME=subscriptions  
DB_SSLMODE=disable

### 3Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å
```bash
docker compose up --build
```
–°–µ—Ä–≤–∏—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:  
http://localhost:8081  
–ê–¥—Ä–µ—Å swagger:  
http://localhost:8081/swagger/index.html#/

## üìå API Endpoints
–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
```bash
POST /subscriptions
```
–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
```bash
GET /subscriptions/{id}
```
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
```bash
PATCH /subscriptions/{id}
```
–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
```bash
DELETE /subscriptions/{id}
```
–°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫
```bash
GET /subscriptions/list?user_id=&service_name=
```
–ü–æ–¥—Å—á—ë—Ç –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
```bash
GET /subscriptions/total?from=01-2025&to=12-2025
GET /subscriptions/total?user_id=UUID&service_name=ServiceName&from=MM-YYYY&to=MM-YYYY
```

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PostgreSQL.

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- UUID –≤ –∫–∞—á–µ—Å—Ç–≤–µ primary key
- CHECK constraint –¥–ª—è price >= 0

–ò–Ω–¥–µ–∫—Å—ã:
- –ø–æ user_id
- –ø–æ service_name
- –ø–æ –¥–∞—Ç–∞–º –ø–æ–¥–ø–∏—Å–∫–∏

–ú–∏–≥—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## üìê –ü—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è
- UUID –≤–º–µ—Å—Ç–æ –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞ ‚Äî —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤.
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ DTO –∏ domain –º–æ–¥–µ–ª–µ–π.
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–º–µ–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –≤ service —Å–ª–æ–µ.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–æ –≤—Å–µ—Ö —Å–ª–æ—è—Ö.
- Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤.

## üß™ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (zap / slog)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ unit-—Ç–µ—Å—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è service —Å–ª–æ—è
- Pagination –¥–ª—è —Å–ø–∏—Å–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
- –ú–µ—Ç—Ä–∏–∫–∏ (Prometheus)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
Test task project.